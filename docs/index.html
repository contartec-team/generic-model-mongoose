<!doctype html>
<html lang="en">
<head>
  <meta charset='utf-8'>
  <title>@contartec-team/generic-model-mongoose 0.3.0 | Documentation</title>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <link href='assets/bass.css' rel='stylesheet'>
  <link href='assets/style.css' rel='stylesheet'>
  <link href='assets/github.css' rel='stylesheet'>
  <link href='assets/split.css' rel='stylesheet'>
</head>
<body class='documentation m0'>
    <div class='flex'>
      <div id='split-left' class='overflow-auto fs0 height-viewport-100'>
        <div class='py1 px2'>
          <h3 class='mb0 no-anchor'>@contartec-team/generic-model-mongoose</h3>
          <div class='mb1'><code>0.3.0</code></div>
          <input
            placeholder='Filter'
            id='filter-input'
            class='col12 block input'
            spellcheck='false'
            autocapitalize='off'
            autocorrect='off'
            type='text' />
          <div id='toc'>
            <ul class='list-reset h5 py1-ul'>
              
                
                <li><a
                  href='#getmongooseconnection'
                  class="">
                  getMongooseConnection
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#mongooseeventsenum'
                  class="">
                  MongooseEventsEnum
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#genericmodel'
                  class=" toggle-sibling">
                  GenericModel
                  <span class='icon'>▸</span>
                </a>
                
                <div class='toggle-target display-none'>
                  
                  <ul class='list-reset py1-ul pl1'>
                    <li class='h5'><span>Static members</span></li>
                    
                      <li><a
                        href='#genericmodelquery_attr_names'
                        class='regular pre-open'>
                        .QUERY_ATTR_NAMES
                      </a></li>
                    
                      <li><a
                        href='#genericmodelgetfilterobject'
                        class='regular pre-open'>
                        .getFilterObject
                      </a></li>
                    
                      <li><a
                        href='#genericmodelgetall'
                        class='regular pre-open'>
                        .getAll
                      </a></li>
                    
                      <li><a
                        href='#genericmodelgetcount'
                        class='regular pre-open'>
                        .getCount
                      </a></li>
                    
                      <li><a
                        href='#genericmodelgetone'
                        class='regular pre-open'>
                        .getOne
                      </a></li>
                    
                      <li><a
                        href='#genericmodelsaveorupdate'
                        class='regular pre-open'>
                        .saveOrUpdate
                      </a></li>
                    
                    </ul>
                  
                  
                  
                  
                </div>
                
                </li>
              
                
                <li><a
                  href='#genericschema'
                  class="">
                  genericSchema
                  
                </a>
                
                </li>
              
                
                <li><a
                  href='#querybuilderutils'
                  class="">
                  QueryBuilderUtils
                  
                </a>
                
                </li>
              
            </ul>
          </div>
          <div class='mt1 h6 quiet'>
            <a href='https://documentation.js.org/reading-documentation.html'>Need help reading this?</a>
          </div>
        </div>
      </div>
      <div id='split-right' class='relative overflow-auto height-viewport-100'>
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='getmongooseconnection'>
      getMongooseConnection
    </h3>
    
    
  </div>
  

  <p>Gets/Creates the <code>mongoose</code> connection object</p>

    <div class='pre p1 fill-light mt0'>getMongooseConnection(): mongoose.Connection</div>
  
  

  
  
  
  
  
  

  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code>mongoose.Connection</code>:
        The 
<code>mongoose</code>
 connection object

      
    
  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='mongooseeventsenum'>
      MongooseEventsEnum
    </h3>
    
    
  </div>
  

  <p>Mongoose hook events</p>

    <div class='pre p1 fill-light mt0'>MongooseEventsEnum</div>
  
  

  
  
  
  
  
  

  

  

  

  

  

  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='genericmodel'>
      GenericModel
    </h3>
    
    
  </div>
  

  <p>Contains a set of chewed methods to handle documents</p>

    <div class='pre p1 fill-light mt0'>new GenericModel()</div>
  
  

  
  
  
  
  
  

  

  

  

  

  

  

  
    <div class='py1 quiet mt1 prose-big'>Static Members</div>
    <div class="clearfix">
  
    <div class='border-bottom' id='genericmodelquery_attr_names'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>QUERY_ATTR_NAMES</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>The <code>attrs</code> list to (build the <code>query</code>) fetch the <code>documents</code></p>

    <div class='pre p1 fill-light mt0'>QUERY_ATTR_NAMES</div>
  
    <p>
      Type:
      <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String">string</a>>
    </p>
  
  

  
  
  
  
  
  

  

  

  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='genericmodelgetfilterobject'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>getFilterObject(params)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Returns the (<code>mongodb</code>'s) <code>filter</code> object</p>

    <div class='pre p1 fill-light mt0'>getFilterObject(params: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>params</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
	    The 
<code>filter</code>
 params

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code>:
        The 
<code>filter</code>
 object

      
    
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='genericmodelgetall'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>getAll(params)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Returns the <code>Models</code> list</p>

    <div class='pre p1 fill-light mt0'>getAll(params: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;Model>></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>params</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
            = <code>{}</code>)</code>
	    The 
<code>filter</code>
 params

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array">Array</a>&#x3C;Model>></code>:
        The list of 
<code>Models</code>

      
    
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='genericmodelgetcount'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>getCount(params)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Returns the count <code>Models</code> count</p>

    <div class='pre p1 fill-light mt0'>getCount(params: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a>></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>params</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
            = <code>{}</code>)</code>
	    The 
<code>filter</code>
 params

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>&#x3C;<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number">Number</a>></code>:
        The count of 
<code>Models</code>

      
    
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='genericmodelgetone'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>getOne(params)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Returns the <code>Model</code></p>

    <div class='pre p1 fill-light mt0'>getOne(params: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>&#x3C;Model></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>params</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>
            = <code>{}</code>)</code>
	    The 
<code>filter</code>
 params

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>&#x3C;Model></code>:
        The 
<code>Model</code>

      
    
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
    <div class='border-bottom' id='genericmodelsaveorupdate'>
      <div class="clearfix small pointer toggle-sibling">
        <div class="py1 contain">
            <a class='icon pin-right py1 dark-link caret-right'>▸</a>
            <span class='code strong strong truncate'>saveOrUpdate(object)</span>
        </div>
      </div>
      <div class="clearfix display-none toggle-target">
        <section class='p2 mb2 clearfix bg-white minishadow'>

  

  <p>Saves the <code>Model</code></p>

    <div class='pre p1 fill-light mt0'>saveOrUpdate(object: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>&#x3C;Model></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>object</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
	    The 
<code>Model</code>
 object

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promise</a>&#x3C;Model></code>:
        The saved 
<code>Model</code>
 object

      
    
  

  

  

  

  

  

  

  
</section>

      </div>
    </div>
  
</div>

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='genericschema'>
      genericSchema
    </h3>
    
    
  </div>
  

  <p>Besides preparing <code>GenericModel</code> to be happily inherited as a <code>mongoose.Schema</code> super class:</p>
<ul>
<li>Enable <code>Lambda</code> like functionality for <code>db</code> connections</li>
<li>Broadcast model events (see [<code>mongoose-lifecycle</code>]<a href="https://www.npmjs.com/package/mongoose-lifecycle">https://www.npmjs.com/package/mongoose-lifecycle</a>)</li>
</ul>

    <div class='pre p1 fill-light mt0'>genericSchema(schema: mongoose.Schema, options: <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>, dbConnectFunction: (<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function">Function</a> | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a>)?): <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></div>
  
  

  
  
  
  
  
  

  
    <div class='py1 quiet mt1 prose-big'>Parameters</div>
    <div class='prose'>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>schema</span> <code class='quiet'>(mongoose.Schema)</code>
	    The 
<code>mongoose</code>
 schema object

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>options</span> <code class='quiet'>(<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a>)</code>
	    The 
<code>schema</code>
 options

          </div>
          
        </div>
      
        <div class='space-bottom0'>
          <div>
            <span class='code bold'>dbConnectFunction</span> <code class='quiet'>((<a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function">Function</a> | <a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean">Boolean</a>)?)</code>
	    The 
<code>db</code>
 connect 
<code>function</code>
 or 
<code>true</code>
 if its a 
<code>Lambda</code>
 function (for 
<code>Lambda</code>
 and alikes, see 
<a href="https://mongoosejs.com/docs/lambda.html">https://mongoosejs.com/docs/lambda.html</a>
)

          </div>
          
        </div>
      
    </div>
  

  

  
    
      <div class='py1 quiet mt1 prose-big'>Returns</div>
      <code><a href="https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object">Object</a></code>:
        The 
[
<code>GenericModel</code>
]
<a href="#genericmodel">GenericModel</a>
 and its 
[
<code>Schema</code>
]
<a href="https://mongoosejs.com/docs/api/schema.html#schema_Schema">https://mongoosejs.com/docs/api/schema.html#schema_Schema</a>

      
    
  

  
    <div class='py1 quiet mt1 prose-big'>Related</div>
    
      
        <a href="https://mongoosejs.com/docs/guide.html">https://mongoosejs.com/docs/guide.html</a>

      
    
  

  

  
    <div class='py1 quiet mt1 prose-big'>Example</div>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-comment">// db.js</span>
<span class="hljs-keyword">const</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;mongoose&#x27;</span>)

<span class="hljs-built_in">module</span>.exports = <span class="hljs-function">() =&gt;</span> mongoose.connect(process.env.MONGODB_URL)

<span class="hljs-comment">// You.js</span>
<span class="hljs-keyword">const</span> db = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./db&#x27;</span>)

<span class="hljs-keyword">const</span> SCHEMA = {
   <span class="hljs-attr">name</span>: <span class="hljs-built_in">String</span>,
   <span class="hljs-attr">life</span>: <span class="hljs-built_in">Number</span>,
   ...
}

<span class="hljs-keyword">const</span> OPTIONS = {
   <span class="hljs-attr">_id</span>     : <span class="hljs-literal">true</span>,
   <span class="hljs-attr">strict</span>  : <span class="hljs-literal">false</span>,
   ...
}

<span class="hljs-keyword">const</span> { GenericModel, GenericSchema } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;lib/models/GenericSchema&#x27;</span>)(SCHEMA, OPTIONS, db)

<span class="hljs-built_in">module</span>.exports = mongoose.model(<span class="hljs-string">&#x27;You&#x27;</span>, GenericSchema)

<span class="hljs-comment">// file.js</span>
<span class="hljs-keyword">const</span> You = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./You&#x27;</span>)

You.save({ <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;you&#x27;</span> })

<span class="hljs-keyword">const</span> you = <span class="hljs-keyword">await</span> You.getOne({ <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;you&#x27;</span> })
<span class="hljs-comment">// {</span>
<span class="hljs-comment">//   _id : idRandom,</span>
<span class="hljs-comment">//   name: &#x27;you&#x27;</span>
<span class="hljs-comment">// }</span>

you.name = <span class="hljs-string">&#x27;arpel&#x27;</span>

<span class="hljs-keyword">await</span> you.save()

<span class="hljs-keyword">await</span> You.getAll()
<span class="hljs-comment">// [(1)]</span>

<span class="hljs-keyword">await</span> You.find()
<span class="hljs-comment">// [(1)]</span></pre>
    
      
      <pre class='p1 overflow-auto round fill-light'><span class="hljs-comment">// You.js</span>
<span class="hljs-keyword">const</span> { GenericModel, GenericSchema } = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;lib/models/GenericSchema&#x27;</span>)(SCHEMA, OPTIONS)

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">You</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">GenericModel</span> </span>{
   <span class="hljs-function"><span class="hljs-title">arpel</span>(<span class="hljs-params"></span>)</span> {
     <span class="hljs-built_in">this</span>.name = <span class="hljs-string">&#x27;arpel&#x27;</span>

     <span class="hljs-keyword">return</span> <span class="hljs-built_in">this</span>.save()
   }

   <span class="hljs-keyword">static</span> <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-title">arpel</span>(<span class="hljs-params"></span>)</span> {
     <span class="hljs-keyword">return</span> You.save({ <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;arpel&#x27;</span> })
   }
}

<span class="hljs-built_in">module</span>.exports = mongoose.model(<span class="hljs-string">&#x27;You&#x27;</span>, GenericSchema)

<span class="hljs-comment">// file.js</span>
<span class="hljs-keyword">const</span> You = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./You&#x27;</span>)

<span class="hljs-keyword">const</span> you = <span class="hljs-keyword">new</span> You()

<span class="hljs-keyword">await</span> you.arpel()
<span class="hljs-keyword">await</span> You.arpel()

You.getCount({ <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;arpel&#x27;</span> })
<span class="hljs-comment">// 2</span>

You.count({ <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;arpel&#x27;</span> })
<span class="hljs-comment">// 2</span></pre>
    
  

  

  

  

  
</section>

          
        
          
          <section class='p2 mb2 clearfix bg-white minishadow'>

  
  <div class='clearfix'>
    
    <h3 class='fl m0' id='querybuilderutils'>
      QueryBuilderUtils
    </h3>
    
    
  </div>
  

  <p>Contains a set of <code>mongo</code> query builder utils</p>

    <div class='pre p1 fill-light mt0'>new QueryBuilderUtils()</div>
  
  

  
  
  
  
  
  

  

  

  

  

  

  

  

  

  

  
</section>

          
        
      </div>
    </div>
  <script src='assets/anchor.js'></script>
  <script src='assets/split.js'></script>
  <script src='assets/site.js'></script>
</body>
</html>
